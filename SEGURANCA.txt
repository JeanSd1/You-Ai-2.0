ğŸ”’ GUIA DE SEGURANÃ‡A - YouAi
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Este documento contÃ©m recomendaÃ§Ãµes de seguranÃ§a para o projeto YouAi.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£  VARIÃVEIS DE AMBIENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NUNCA faÃ§a commit de arquivos .env em produÃ§Ã£o!

âŒ ERRADO:
  MONGODB_URI=mongodb+srv://usuario:123456@cluster.mongodb.net/youai
  JWT_SECRET=minha_chave_super_fraca_123

âœ… CORRETO (Desenvolvimento):
  MONGODB_URI=mongodb+srv://usuario:senha_forte@cluster.mongodb.net/youai
  JWT_SECRET=Uma_Chave_Realmente_Forte_Com_Caracteres_Especiais!@#$%^&*

âœ… PRODUÃ‡ÃƒO:
  Use variÃ¡veis de ambiente do servidor:
  - Render: Painel â†’ Environment
  - Heroku: heroku config:set VAR=valor
  - AWS: AWS Secrets Manager

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2ï¸âƒ£  SENHAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A aplicaÃ§Ã£o jÃ¡ implementa:
  âœ… Hash com bcrypt (10 salts)
  âœ… ComparaÃ§Ã£o segura
  âœ… Senha nÃ£o armazenada em log
  âœ… ValidaÃ§Ã£o de forÃ§a (mÃ­nimo 6 caracteres)

RECOMENDAÃ‡Ã•ES:
  â€¢ Use senhas com pelo menos 12 caracteres em produÃ§Ã£o
  â€¢ Implemente validaÃ§Ã£o de forÃ§a de senha no frontend
  â€¢ Considere adicionar autenticaÃ§Ã£o 2FA (two-factor)
  â€¢ NÃ£o reutilize senhas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3ï¸âƒ£  AUTENTICAÃ‡ÃƒO JWT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONFIGURAÃ‡ÃƒO ATUAL:
  â€¢ Token vÃ¡lido por 7 dias
  â€¢ Armazenado no localStorage

âš ï¸ MELHORIAS RECOMENDADAS:

Para maior seguranÃ§a em produÃ§Ã£o:

a) Usar httpOnly cookies ao invÃ©s de localStorage:
   // Backend
   res.cookie('token', token, {
     httpOnly: true,
     secure: true,  // HTTPS apenas
     sameSite: 'strict',
     maxAge: 7 * 24 * 60 * 60 * 1000
   })

b) Implementar refresh tokens:
   â€¢ Access token: 15 minutos
   â€¢ Refresh token: 7 dias
   â€¢ Refresh token em httpOnly cookie

c) Renovar token periodicamente:
   â€¢ Verificar expiraÃ§Ã£o
   â€¢ Renovar antes de expirar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4ï¸âƒ£  PROTEÃ‡ÃƒO DE ROTAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… IMPLEMENTADO:
  â€¢ Middleware protect em todas as rotas sensÃ­veis
  â€¢ VerificaÃ§Ã£o de ownership (usuÃ¡rio sÃ³ acessa seus dados)
  â€¢ Erros de autenticaÃ§Ã£o retornam 401/403

EXEMPLO:
  // Verificar se cliente pertence ao usuÃ¡rio
  if (client.userId.toString() !== req.user.id) {
    return res.status(403).json({ success: false })
  }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5ï¸âƒ£  VALIDAÃ‡ÃƒO DE DADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMPLEMENTADO:
  âœ… ValidaÃ§Ã£o de email (regex)
  âœ… ValidaÃ§Ã£o de campos obrigatÃ³rios
  âœ… ValidaÃ§Ã£o de tipos
  âœ… Tratamento de erros

PARA MELHORAR:
  Instale express-validator:

  npm install express-validator

  Exemplo:
  const { body, validationResult } = require('express-validator')

  app.post('/api/auth/register', [
    body('email').isEmail(),
    body('password').isLength({ min: 8 }),
    body('name').trim().notEmpty()
  ], (req, res) => {
    const errors = validationResult(req)
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() })
    }
    // ...
  })

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6ï¸âƒ£  MONGODB ATLAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CONFIGURAR:

1. Network Access:
   â€¢ NÃƒO USE 0.0.0.0/0 em produÃ§Ã£o
   â€¢ Adicione apenas seus IPs de servidor
   â€¢ Exemplo: 192.168.1.1/32

2. Database Access:
   â€¢ Crie usuÃ¡rio com permissÃµes mÃ­nimas
   â€¢ Use senhas fortes (20+ caracteres)
   â€¢ NÃ£o use senhas simples

3. Criptografia:
   â€¢ Ativar criptografia em repouso
   â€¢ Usar HTTPS em todas as conexÃµes

4. Backups:
   â€¢ Ativar backup automÃ¡tico
   â€¢ Testar restauraÃ§Ã£o regularmente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7ï¸âƒ£  CORS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONFIGURAÃ‡ÃƒO ATUAL (Desenvolvimento):
  cors({
    origin: 'http://localhost:5173',
    credentials: true
  })

PRODUÃ‡ÃƒO:
  cors({
    origin: 'https://seu-dominio.com',  // EspecÃ­fico
    credentials: true,
    methods: ['GET', 'POST', 'PUT', 'DELETE'],
    allowedHeaders: ['Content-Type', 'Authorization']
  })

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8ï¸âƒ£  RATE LIMITING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMPLEMENTAR para evitar brute force:

  npm install express-rate-limit

  const rateLimit = require('express-rate-limit')

  const limiter = rateLimit({
    windowMs: 15 * 60 * 1000,  // 15 minutos
    max: 100,  // 100 requisiÃ§Ãµes
    message: 'Muitas requisiÃ§Ãµes, tente novamente mais tarde'
  })

  app.use('/api/', limiter)
  
  // Limite mais restritivo para login
  const loginLimiter = rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 5
  })
  
  app.post('/api/auth/login', loginLimiter, login)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
9ï¸âƒ£  HELMET (SeguranÃ§a de Headers)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Instale:
  npm install helmet

Use no servidor:
  const helmet = require('helmet')
  app.use(helmet())

Isso adiciona headers de seguranÃ§a:
  â€¢ X-Frame-Options: DENY
  â€¢ X-Content-Type-Options: nosniff
  â€¢ Strict-Transport-Security
  â€¢ etc.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”Ÿ LOGGING E MONITORAMENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMPLEMENTAR:
  npm install winston

Para rastrear:
  âœ… Tentativas de login falhadas
  âœ… Acessos nÃ£o autorizados
  âœ… Erros do servidor
  âœ… Atividades suspeitas

EXEMPLO:
  const winston = require('winston')

  const logger = winston.createLogger({
    level: 'info',
    format: winston.format.json(),
    transports: [
      new winston.transports.File({ filename: 'error.log', level: 'error' }),
      new winston.transports.File({ filename: 'combined.log' })
    ]
  })

  // Usar
  logger.info('UsuÃ¡rio fez login', { userId, email })
  logger.error('Erro de conexÃ£o', { error })

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£1ï¸âƒ£  HTTPS EM PRODUÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMPORTANTE:
  âŒ NUNCA use HTTP em produÃ§Ã£o
  âœ… SEMPRE use HTTPS

Render/Heroku fazem isso automaticamente com Let's Encrypt.

Para Node.js puro:
  const https = require('https')
  const fs = require('fs')

  const options = {
    key: fs.readFileSync('chave-privada.pem'),
    cert: fs.readFileSync('certificado.pem')
  }

  https.createServer(options, app).listen(3001)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£2ï¸âƒ£  SEGREDOS E TOKENS SENSÃVEIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NUNCA faÃ§a commit:
  âŒ .env files
  âŒ Chaves privadas
  âŒ Tokens API
  âŒ Senhas de banco de dados
  âŒ Certificados

Use:
  âœ… .gitignore (jÃ¡ configurado)
  âœ… VariÃ¡veis de ambiente no servidor
  âœ… Secrets management (AWS, GitHub, Render)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£3ï¸âƒ£  CHECKLIST PRÃ‰-PRODUÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[ ] Senhas JWT e MongoDB sÃ£o fortes (20+ caracteres)
[ ] NODE_ENV estÃ¡ set como 'production'
[ ] HTTPS estÃ¡ ativado
[ ] CORS apenas permite seu domÃ­nio
[ ] .env nÃ£o estÃ¡ no git
[ ] Rate limiting estÃ¡ implementado
[ ] Logging estÃ¡ ativo
[ ] Backups automÃ¡ticos configurados
[ ] Headers de seguranÃ§a (Helmet) ativados
[ ] ValidaÃ§Ã£o de entrada implementada
[ ] Testes de seguranÃ§a executados
[ ] DependÃªncias atualizadas (npm audit)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£4ï¸âƒ£  MANUTENÃ‡ÃƒO CONTÃNUA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Regularmente:
  â€¢ Verifique vulnerabilidades: npm audit
  â€¢ Atualize dependÃªncias: npm update
  â€¢ Revise logs de erro
  â€¢ Teste backups
  â€¢ Revise permissÃµes de usuÃ¡rios
  â€¢ Monitore usage de recursos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ DÃšVIDAS DE SEGURANÃ‡A?

Recursos Ãºteis:
  â€¢ OWASP Top 10: https://owasp.org/Top10/
  â€¢ Node.js Security: https://nodejs.org/en/docs/guides/security/
  â€¢ MongoDB Best Practices: https://docs.mongodb.com/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
